---
import PhoneMockup from './PhoneMockup.astro';

const steps = [
  {
    number: '01',
    title: 'Capture',
    subtitle: 'Without breaking flow.',
    description: 'Driving. Walking. Showering. The best ideas hit at the worst times. Voice in, hands free. Siri grabs it. You keep being brilliant.',
    image: '/assets/MAIN-mockup-page-VTT.png',
    imageAlt: 'Voice-to-text capture in action',
  },
  {
    number: '02',
    title: 'Organize',
    subtitle: 'While you are onto the next thing.',
    description: 'Tags it. Links it. Files it. No folders. No elaborate systems. No homework. Organization happens in the background while you stay in creative mode.',
    image: '/assets/MAIN-mockup-page-Bins.png',
    imageAlt: 'AI-organized categories and smart bins',
  },
  {
    number: '03',
    title: 'Recall',
    subtitle: 'By words. By meaning. By vibes.',
    description: 'That quote from that podcast three months ago? That half-remembered book note? Search by exact words OR by meaning. Found in seconds.',
    image: '/assets/MAIN-mockup-page-Thoughtmark.png',
    imageAlt: 'Semantic search finding connected ideas',
  },
];
---

<section id="how-it-works" class="section relative overflow-hidden bg-zinc-950">
  <!-- Organic shapes (decorative, hidden from screen readers) -->
  <div class="absolute inset-0 pointer-events-none" aria-hidden="true">
    <div class="absolute top-0 left-1/4 w-[600px] h-[400px] rounded-full bg-gradient-to-b from-accent/5 to-transparent blur-3xl"></div>
    <div class="absolute bottom-0 right-1/4 w-[500px] h-[300px] rounded-full bg-gradient-to-t from-amber-500/5 to-transparent blur-3xl"></div>
  </div>

  <div class="container-wide relative z-10">
    <!-- Section Header -->
    <div class="text-center max-w-3xl mx-auto mb-20">
      <h2 class="text-4xl sm:text-5xl font-black text-white mb-6 leading-tight">
        Capture in the flow.<br />
        <span class="text-accent">Find your focus.</span>
      </h2>
      <p class="text-xl text-zinc-400">
        That great story you butchered at the party? Never again.
      </p>
    </div>

    <!-- Steps -->
    <div class="space-y-24 lg:space-y-32">
      {steps.map((step, index) => (
        <div class={`grid lg:grid-cols-2 gap-12 lg:gap-20 items-center ${index % 2 === 1 ? 'lg:grid-flow-dense' : ''}`}>
          <!-- Content -->
          <div class={`space-y-6 ${index % 2 === 1 ? 'lg:col-start-2' : ''}`}>
            <div class="flex items-baseline gap-4">
              <!-- Decorative step number - hidden from screen readers (low contrast is intentional for design) -->
              <span class="text-6xl sm:text-7xl font-black text-accent/30" aria-hidden="true">{step.number}</span>
              <div>
                <h3 class="text-3xl sm:text-4xl font-bold text-white">
                  <span class="sr-only">Step {step.number}: </span>{step.title}
                </h3>
                <p class="text-lg text-zinc-400 mt-1">{step.subtitle}</p>
              </div>
            </div>
            <p class="text-xl text-zinc-300 leading-relaxed max-w-lg">
              {step.description}
            </p>
          </div>

          <!-- Phone mockup with 3D treatment -->
          <div class={`relative flex justify-center ${index % 2 === 1 ? 'lg:col-start-1' : ''}`}>
            <!-- Glow behind phone (decorative) -->
            <div class="absolute inset-0 flex items-center justify-center pointer-events-none" aria-hidden="true">
              <div class="w-[350px] h-[500px] bg-gradient-to-br from-accent/15 via-accent/5 to-transparent rounded-full blur-3xl"></div>
            </div>
            
            <PhoneMockup 
              src={step.image}
              alt={step.imageAlt}
              class="mockup-smaller"
            />
          </div>
        </div>
      ))}
    </div>

    <!-- Bonus callout -->
    <div class="mt-20 text-center">
      <div class="inline-block px-6 py-3 rounded-full bg-zinc-900 border border-zinc-800">
        <p class="text-zinc-400">
          <span class="text-white font-semibold">Bonus:</span> AI suggests books, podcasts, and videos to go deeper on what you are already thinking about.
        </p>
      </div>
    </div>
  </div>
</section>

<style>
  .mockup-smaller {
    --phone-width: 240px;
  }

  @media (min-width: 640px) {
    .mockup-smaller {
      --phone-width: 280px;
    }
  }

  @media (min-width: 1024px) {
    .mockup-smaller {
      --phone-width: 320px;
    }
  }
</style>
